<div class="transaction-section">
  <div class="transaction-header">
    <h3>Alle Transaktionen</h3>
    <div class="action-buttons">
      <button
        class="round-button add"
        (click)="openAddModal()"
        title="Hinzuf√ºgen"
      >
        Ôºã
      </button>
    </div>
  </div>

  <table class="transaction-table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Datum</th>
        <th>Betrag</th>
        <th>Aktion</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let tx of latestTransactions">
        <td>{{ tx.description }}</td>
        <td>{{ tx.date | date : "dd.MM.yyyy" }}</td>
        <td [ngStyle]="{ color: tx.type === 'INCOME' ? 'green' : 'red' }">
          {{ tx.amount | currency : "EUR" }}
        </td>
        <td>
          <button
            class="edit-button"
            (click)="openEditModal(tx)"
            title="Bearbeiten"
          >
            ‚úèÔ∏è
          </button>
          <button
            class="edit-button delete"
            (click)="openDeleteModal(tx)"
            title="L√∂schen"
          >
            üóëÔ∏è
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Add Modal -->
<div class="modal" *ngIf="showAddModal">
  <div class="modal-content">
    <h3>Neue Transaktion</h3>
    <form (ngSubmit)="addTransaction()">
      <label for="description">Beschreibung</label>
      <input
        id="description"
        [(ngModel)]="newTransaction.description"
        name="description"
        required
      />

      <label for="amount">Betrag (‚Ç¨)</label>
      <input
        id="amount"
        type="number"
        step="0.01"
        [(ngModel)]="newTransaction.amount"
        name="amount"
        required
      />

      <label for="type">Typ</label>
      <select id="type" [(ngModel)]="newTransaction.type" name="type" required>
        <option value="INCOME">Einnahme</option>
        <option value="EXPENSE">Ausgabe</option>
      </select>

      <label for="category">Kategorie</label>
      <input
        id="category"
        [(ngModel)]="newTransaction.category"
        name="category"
        required
      />

      <label for="date">Datum</label>
      <input
        id="date"
        type="date"
        [(ngModel)]="newTransaction.date"
        name="date"
        required
      />

      <div class="modal-actions">
        <button type="submit">Speichern</button>
        <button type="button" (click)="closeAddModal()">Abbrechen</button>
      </div>
    </form>
  </div>
</div>

<!-- Delete Modal -->
<div class="modal" *ngIf="showDeleteModal">
  <div class="modal-content">
    <h3>Transaktion l√∂schen?</h3>
    <p>
      M√∂chtest du die Transaktion
      <strong>{{ selectedTransaction?.description }}</strong> wirklich l√∂schen?
    </p>
    <div class="modal-actions">
      <button (click)="confirmDelete()">Ja</button>
      <button (click)="closeDeleteModal()">Nein</button>
    </div>
  </div>
</div>

<!-- Edit Modal -->
<div class="modal" *ngIf="showEditModal && editTransaction as tx">
  <div class="modal-content">
    <h3>Transaktion bearbeiten</h3>
    <form (ngSubmit)="saveEditTransaction()">
      <label for="editDescription">Beschreibung</label>
      <input
        id="editDescription"
        [(ngModel)]="tx.description"
        name="editDescription"
        required
      />

      <label for="editAmount">Betrag (‚Ç¨)</label>
      <input
        id="editAmount"
        type="number"
        step="0.01"
        [(ngModel)]="tx.amount"
        name="editAmount"
        required
      />

      <label for="editType">Typ</label>
      <select id="editType" [(ngModel)]="tx.type" name="editType" required>
        <option value="INCOME">Einnahme</option>
        <option value="EXPENSE">Ausgabe</option>
      </select>

      <label for="editCategory">Kategorie</label>
      <input
        id="editCategory"
        [(ngModel)]="tx.category"
        name="editCategory"
        required
      />

      <label for="editDate">Datum</label>
      <input
        id="editDate"
        type="date"
        [(ngModel)]="tx.date"
        name="editDate"
        required
      />

      <div class="modal-actions">
        <button type="submit">Speichern</button>
        <button type="button" (click)="closeEditModal()">Abbrechen</button>
      </div>
    </form>
  </div>
</div>
